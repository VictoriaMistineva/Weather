{"ast":null,"code":"import _regeneratorRuntime from\"/home/zelairy/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/weather-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/zelairy/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/weather-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/zelairy/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/weather-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import LocationBox from\"./components/location/location\";import TemperatureAndWeather from\"./components/temp/temp\";import{backgroundStyleByTemp}from\"./components/background/background\";import Clothes from\"./components/clothes/clothes\";import{loadGoogleScript}from'./lib/GoogleLogin';var googleClientId=\"919987767854-v7s232d6ucjlisc0und3m8ik8n13jkgb.apps.googleusercontent.com\";var api={key:\"25521e44d3e70320abb96685b57352e9\",base:\"https://api.openweathermap.org/data/2.5/\"};function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),weather=_useState4[0],setWeather=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),gapi=_useState6[0],setGapi=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),googleAuth=_useState8[0],setGoogleAuth=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoggedIn=_useState10[0],setIsLoggedIn=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),name=_useState12[0],setName=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),email=_useState14[0],setEmail=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),imageUrl=_useState16[0],setImageUrl=_useState16[1];var onSuccess=function onSuccess(googleUser){setIsLoggedIn(true);var profile=googleUser.getBasicProfile();setName(profile.getName());setEmail(profile.getEmail());setImageUrl(profile.getImageUrl());};var onFailure=function onFailure(){setIsLoggedIn(false);};var logOut=function logOut(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return googleAuth.signOut();case 2:setIsLoggedIn(false);renderSigninButton(gapi);case 4:case\"end\":return _context.stop();}}},_callee);}))();};var renderSigninButton=function renderSigninButton(_gapi){_gapi.signin2.render('google-signin',{'scope':'profile email','width':240,'height':50,'longtitle':true,'theme':'dark','onsuccess':onSuccess,'onfailure':onFailure});};useEffect(function(){//window.gapi is available at this point\nwindow.onGoogleScriptLoad=function(){var _gapi=window.gapi;setGapi(_gapi);_gapi.load('auth2',function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _googleAuth;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _gapi.auth2.init({client_id:googleClientId});case 2:_googleAuth=_context2.sent;setGoogleAuth(_googleAuth);renderSigninButton(_gapi);case 5:case\"end\":return _context2.stop();}}},_callee2);}))();});};//ensure everything is set before loading the script\nloadGoogleScript();},[]);var search=function search(evt){if(evt.key===\"Enter\"){fetch(\"\".concat(api.base,\"weather?q=\").concat(query,\"&units=metric&APPID=\").concat(api.key)).then(function(res){return res.json();}).then(function(result){setWeather(result);setQuery('');console.log(result);});}};return/*#__PURE__*/React.createElement(\"div\",null,!isLoggedIn&&/*#__PURE__*/React.createElement(\"div\",{className:\"login-screen-cover\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-screen-text-box\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"login-screen-heading-primary\"},/*#__PURE__*/React.createElement(\"span\",{className:\"login-screen-heading-primary-main\"},\"Clothing recommendation\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-screen-heading-primary-sub\"},\"depending on the weather\")),/*#__PURE__*/React.createElement(\"div\",{id:\"google-signin\"}))),isLoggedIn&&/*#__PURE__*/React.createElement(\"div\",{className:backgroundStyleByTemp(weather.main)},/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"search-box\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"search-bar\",placeholder:\"\\u0421ity search..\",onChange:function onChange(e){return setQuery(e.target.value);},value:query,onKeyPress:search}),/*#__PURE__*/React.createElement(\"button\",{id:\"login\",className:\"button blue\",onClick:logOut},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-unlock\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Log Out\")))),typeof weather.main!=\"undefined\"?/*#__PURE__*/React.createElement(\"div\",{className:\"case\"},/*#__PURE__*/React.createElement(LocationBox,{weather:weather}),/*#__PURE__*/React.createElement(TemperatureAndWeather,{weather:weather}),/*#__PURE__*/React.createElement(Clothes,{weather:weather})):'')));}export default App;","map":{"version":3,"sources":["/home/zelairy/Рабочий стол/weather-app/src/App.js"],"names":["React","useState","useEffect","LocationBox","TemperatureAndWeather","backgroundStyleByTemp","Clothes","loadGoogleScript","googleClientId","api","key","base","App","query","setQuery","weather","setWeather","gapi","setGapi","googleAuth","setGoogleAuth","isLoggedIn","setIsLoggedIn","name","setName","email","setEmail","imageUrl","setImageUrl","onSuccess","googleUser","profile","getBasicProfile","getName","getEmail","getImageUrl","onFailure","logOut","signOut","renderSigninButton","_gapi","signin2","render","window","onGoogleScriptLoad","load","auth2","init","client_id","_googleAuth","search","evt","fetch","then","res","json","result","console","log","main","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport LocationBox from \"./components/location/location\";\nimport TemperatureAndWeather from \"./components/temp/temp\";\nimport {backgroundStyleByTemp} from \"./components/background/background\";\nimport Clothes from \"./components/clothes/clothes\";\nimport { loadGoogleScript } from './lib/GoogleLogin';\nconst googleClientId = \"919987767854-v7s232d6ucjlisc0und3m8ik8n13jkgb.apps.googleusercontent.com\";\n\n\n\nconst api = {\n  key: \"25521e44d3e70320abb96685b57352e9\",\n  base: \"https://api.openweathermap.org/data/2.5/\"\n}\n\nfunction App() {\n  const [query, setQuery] = useState('');\n  const [weather, setWeather] = useState({});\n  const [gapi, setGapi] = useState();\n  const [googleAuth, setGoogleAuth] = useState();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [imageUrl, setImageUrl] = useState();\n\n  const onSuccess = (googleUser) => {\n    setIsLoggedIn(true);\n    const profile = googleUser.getBasicProfile();\n    setName(profile.getName());\n    setEmail(profile.getEmail());\n    setImageUrl(profile.getImageUrl());\n  };\n  \n  const onFailure = () => {\n    setIsLoggedIn(false);\n  }\n  \n  const logOut = () => {\n    (async() => {\n      await googleAuth.signOut();\n      setIsLoggedIn(false);\n      renderSigninButton(gapi);\n    })();\n  };\n  \n  const renderSigninButton = (_gapi) => {\n    _gapi.signin2.render('google-signin', {\n      'scope': 'profile email',\n      'width': 240,\n      'height': 50,\n      'longtitle': true,\n      'theme': 'dark',\n      'onsuccess': onSuccess,\n      'onfailure': onFailure \n    });\n  }\n  \n  \n  useEffect(() => {\n    \n    //window.gapi is available at this point\n    window.onGoogleScriptLoad = () => {\n     \n      const _gapi = window.gapi;\n      setGapi(_gapi);\n      \n      _gapi.load('auth2', () => {\n        (async () => { \n          const _googleAuth = await _gapi.auth2.init({\n           client_id: googleClientId\n          });\n          setGoogleAuth(_googleAuth);\n          renderSigninButton(_gapi);\n        })();\n      });\n    }\n    \n    //ensure everything is set before loading the script\n    loadGoogleScript();\n    \n  }, []);\n\n\n  const search = evt => {\n    if (evt.key === \"Enter\") {\n      fetch(`${api.base}weather?q=${query}&units=metric&APPID=${api.key}`)\n        .then(res => res.json())\n        .then(result => {\n          setWeather(result);\n          setQuery('');\n          console.log(result);\n        });\n    }\n  }\n\n  return (\n    <div>\n        {!isLoggedIn &&\n          <div className=\"login-screen-cover\">\n\n            <div className=\"login-screen-text-box\">\n              <h1 className=\"login-screen-heading-primary\">\n                <span className=\"login-screen-heading-primary-main\">Clothing recommendation</span>\n                <span className=\"login-screen-heading-primary-sub\">depending on the weather</span>\n              </h1>\n              <div id=\"google-signin\"></div>\n            </div>\n          </div>\n        }\n        {isLoggedIn &&\n          <div\n          className={(backgroundStyleByTemp(weather.main))}>\n            <main>\n              <div>\n                <div className=\"search-box\">\n                  <input\n                    type=\"text\"\n                    className=\"search-bar\"\n                    placeholder=\"Сity search..\"\n                    onChange={e => setQuery(e.target.value)}\n                    value={query}\n                    onKeyPress={search}\n                  />\n                  <button id=\"login\" className=\"button blue\" onClick={logOut}>\n                    <i className=\"fa fa-unlock\"></i>\n                    <span>Log Out</span>\n                  </button>\n                </div>\n              </div>\n\n        {(typeof weather.main != \"undefined\") ? (\n          <div className=\"case\">\n        {/*локация кейсs*/}\n          <LocationBox  weather = {weather}/>\n        {/*температура*/}\n          <TemperatureAndWeather weather = {weather}/>\n        {/*одежда*/}\n          <Clothes weather = {weather}/>\n          </div>\n          ) : ('')}\n          </main>\n          </div>\n        }\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}